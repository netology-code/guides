#Шпаргалка по работе с редактором Vim


## **Общее**

| **:help keyword** | Открыть помощь по ключевому слову                     |
| ----------------- | ----------------------------------------------------- |
| **:o file**       | Открыть file                                          |
| **:sav file**     | Сохранить весь текущий буфер как file                 |
| **:close**        | Закрыть текущую панель                                |
| **K**             | Открыть справочное руководство для слова под курсором |


## **Перемещение курсора**

| **h**        | Передвинуть курсор влево                                                                                                   |
| ------------ | -------------------------------------------------------------------------------------------------------------------------- |
| **j**        | Передвинуть курсор на одну фактическую строку вниз                                                                         |
| **k**        | Передвинуть курсор на одну фактическую строку вверх                                                                        |
| **l**        | Передвинуть курсор вправо                                                                                                  |
| **gj**       | Передвинуть курсор на одну видимую строку вниз                                                                             |
| **gk**       | Передвинуть курсор на одну видимую строку вверх                                                                            |
| **H**        | Переместиться к началу экрана                                                                                              |
| **M**        | Переместиться к середине экрана                                                                                            |
| **L**        | Переместиться к концу экрана                                                                                               |
| **w**        | Переместиться вперёд на начало слова                                                                                       |
| **W**        | Переместиться вперёд на начало слова (слово может содержать знаки препинания)                                              |
| **e**        | Переместиться вперёд на конец слова                                                                                        |
| **E**        | Переместиться вперёд на конец слова (слово может содержать знаки препинания)                                               |
| **b**        | Переместиться назад на начало слова                                                                                        |
| **B**        | Переместиться назад на начало слова (слово может содержать знаки препинания)                                               |
| **%**        | Переместиться к парному символу (по умолчанию поддерживаются '()', '{}', '\[]' — подробнее по команде :h matchpairs в vim) |
| **0**        | Переместиться на начало строки                                                                                             |
| **^**        | Переместиться на первый непробельный символ строки                                                                         |
| **$**        | Переместиться на конец строки                                                                                              |
| **g\_**      | Переместиться к последнему непустому символу в строке                                                                      |
| **gg**       | Переместиться на первую строку документа                                                                                   |
| **G**        | Переместиться на последнюю строку документа                                                                                |
| **5G**       | Переместить на пятую строку                                                                                                |
| **fx**       | Переместиться к следующему вхождению символа x   в текущей строке                                                          |
| **tx**       | Установить курсор за следующим вхождением символа x   в строке                                                             |
| **Fx**       | Переместиться на предыдущее вхождение символа x   в текущей строке                                                         |
| **Tx**       | Установить курсор за предыдущим вхождением символа x в строке                                                              |
| ** ;**       | Повторить предыдущее f, t, F или T-перемещение                                                                             |
| ** ,**       | Повторить предыдущее f, t, F или T-перемещение   в обратном направлении                                                    |
| **}**        | Переместиться к следующему параграфу   или функции/блоку при редактировании кода                                           |
| **{**        | Переместиться к предыдущему параграфу   или функции/блоку при редактировании кода                                          |
| **zz**       | Сдвинуть весь буфер по вертикали вместе с курсором, чтобы курсор оказался в центре                                         |
| **Ctrl + b** | Переместиться назад на целый экран                                                                                         |
| **Ctrl + f** | Переместиться вперёд на целый экран                                                                                        |
| **Ctrl + d** | Переместиться вперёд на половину экрана                                                                                    |
| **Ctrl + u** | Переместиться назад на половину экрана                                                                                     |



**Совет:** добавьте число перед командой перемещения курсора, чтобы повторить её. Пример: **4j** перемещает курсор на 4 строки вниз.


## **Режим вставки — вставка, добавление текста**

| **i**   | Вставка перед курсором                |
| ------- | ------------------------------------- |
| **I**   | Вставка в начало строки               |
| **a**   | Вставка, добавление после курсора     |
| **A**   | Вставка, добавление в конец строки    |
| **o**   | Добавление новой строки под текущей   |
| **O**   | Добавление новой строки над текущей   |
| **ea**  | Вставка, добавление после конца слова |
| **Esc** | Выход из режима вставки               |


## **Редактирование**

| **r**        | Заменить один символ                            |
| ------------ | ----------------------------------------------- |
| **J**        | Присоединить нижнюю строку к текущей            |
| **cc**       | Заменить всю строку                             |
| **cw**       | Заменить всё текущее слово                      |
| **c$**       | Заменить до конца строки                        |
| **s**        | Удалить символ и заменить текст                 |
| **S**        | Удалить строку и заменить текст — то же, что cc |
| **xp**       | Переставить две буквы — удалить и вставить      |
| **u**        | Отменить                                        |
| **Ctrl + r** | Применить последнее отменённое изменение        |
| ****         | Повторить последнюю команду                     |


## **Выделение текста — визуальный режим**

| **v**        | Включить режим выделения текста. Выделить строки, затем выполнить команду, например, y-копирование |
| ------------ | -------------------------------------------------------------------------------------------------- |
| **V**        | Включить построчный режим выделения                                                                |
| **o**        | Переместиться на другой конец выделенной области                                                   |
| **Ctrl + v** | Включить режим выделения блоков                                                                    |
| **O**        | Переместить на другой угол блока                                                                   |
| **aw**       | Выделить слово                                                                                     |
| **ab**       | Блок в ()                                                                                          |
| **aB**       | Блок в {}                                                                                          |
| **ib**       | Внутренний блок в ()                                                                               |
| **iB**       | Внутренний блок в {}                                                                               |
| **Esc**      | Выйти из режима выделения текста                                                                   |


## **Визуальные команды**

| **>**    | Сместить текст вправо        |
| -------- | ---------------------------- |
| **&lt;** | Сместить текст влево         |
| **y**    | Скопировать выделенный текст |
| **d**    | Удалить выделенный текст     |
| **~**    | Переключить регистр          |


## **Регистры**

| **:reg** | Показать содержимое регистров    |
| -------- | -------------------------------- |
| **"xy**  | Поместить содержимое в регистр x |
| **"xp**  | Вставить содержимое регистра x   |



**Совет:** содержимое регистров сохраняется в ~/ viminfo и восстанавливается   
при следующем запуске vim.

**Совет:** в нулевом регистре всегда хранится содержимое последней команды копирования.


## **Метки**

| **:marks** | Список меток                          |
| ---------- | ------------------------------------- |
| **ma**     | Установить метку A на текущей позиции |
| **\`a**    | Переместиться к метке A               |
| **y\`a**   | Скопировать до метки A                |



## **Макросы**

| **qa** | Записать макрос а          |
| ------ | -------------------------- |
| **q**  | Остановить запись макроса  |
| **@a** | Запустить макрос а         |
| **@@** | Выполнить последний макрос |



## **Вырезать и вставить**

| **yy**  | Скопировать строку                   |
| ------- | ------------------------------------ |
| **2yy** | Скопировать 2 строки                 |
| **yw**  | Скопировать слово                    |
| **y$**  | Скопировать до конца строки          |
| **p**   | Вставить буфер обмена после курсора  |
| **P**   | Вставить буфер обмена перед курсором |
| **dd**  | Удалить, вырезать строку             |
| **2dd** | Удалить, вырезать 2 строки           |
| **dw**  | Удалить, вырезать слово              |
| **D**   | Удалить, вырезать до конца строки    |
| **d$**  | Удалить, вырезать до конца строки    |
| **x**   | Удалить, вырезать символ             |



## **Выход и сохранение**

| **:w**                  | Сохранить файл, но не выходить                          |
| ----------------------- | ------------------------------------------------------- |
| **:w !sudo tee %**      | Сохранить файл с sudo                                   |
| **:wq либо :x либо ZZ** | Сохранить файл и выйти                                  |
| **:q**                  | Выйти (терпит неудачу в случае несохранённых изменений) |
| **:q! либо ZQ**         | Выйти и потерять несохранённые изменения                |



## **Поиск и замена**

| **/pattern**       | Поиск шаблона                                                                                                         |
| ------------------ | --------------------------------------------------------------------------------------------------------------------- |
| **?pattern**       | Обратный поиск шаблона                                                                                                |
| **\\vpattern**     | 'very magic' режим: все не алфавитно-цифровые символы интерпретируются как специальные. Экранирование   не требуется) |
| **n**              | Повторить поиск в том же направлении                                                                                  |
| **N**              | Повторить поиск в обратном направлении                                                                                |
| **:%s/old/new/g**  | Заменить все вхождения шаблона в файл на указанное значение                                                           |
| **:%s/old/new/gc** | Заменить все вхождения шаблона в файл на указанное значение с подтверждением                                          |
| **:noh**           | Отключить подсвечивание результатов поиска                                                                            |


## **Поиск в нескольких файлах**

| **:vimgrep /pattern/ {file}**  | Поиск по шаблону в нескольких файлах   |
| ------------------------------ | -------------------------------------- |
| Пример: :vimgrep /foo/ \*\*/\* |                                        |
| **:cn**                        | Переместиться к следующему совпадению  |
| **:cp**                        | Переместиться к предыдущему совпадению |
| **:copen**                     | Открыть окно со списком результатов    |


## **Сворачивание**

| **zf#j**         | Создаёт свёртку от текущей позиции до # строк вниз                 |
| ---------------- | ------------------------------------------------------------------ |
| **zf/подстрока** | Создаёт свёртку от текущей позиции и до первой найденной подстроки |
| **v/V и zf**     | Выделение блока и создание свёртки                                 |


## **  
****Команды для управления**

| **zc**  | Свернуть блок                                                   |
| ------- | --------------------------------------------------------------- |
| **zo**  | Развернуть блок                                                 |
| **zM**  | Закрыть все блоки                                               |
| **zR**  | Открыть все блоки                                               |
| **za**  | Инвертировать: если открыто — закрыть,   если закрыто — открыть |
| **zj**  | Переход к следующей свёртке                                     |
| **zk**  | Переход к предыдущей свёртке                                    |
| **zd**  | Удалить свёртку под курсором                                    |
| **zD**  | Удалить все свёртки                                             |
| **\[z** | Перейти к началу текущей свёртки                                |
| **]z**  | Перейти к концу текущей свёртки                                 |



После закрытия**Vim** все свёртки забываются, для сохранения свёрток   
в открытом файле используется команда :mkview, для загрузки — :loadview ([подробнее](http://vimdoc.sourceforge.net/htmldoc/fold.html#Folding)).


## **Работа с несколькими файлами**

| **:e file**         | Редактировать файл в новом буфере                          |
| ------------------- | ---------------------------------------------------------- |
| **:bnext либо :bn** | Перейти к следующему буферу                                |
| **:bprev либо :bp** | Перейти к предыдущему буферу                               |
| **:bd**             | Удалить буфер (закрыть файл)                               |
| **:ls**             | Список всех открытых буферов                               |
| **:sp file**        | Открыть файл в новом буфере и разделить окно               |
| **:vsp file**       | Открыть файл в новом буфере и вертикально разделить окно   |
| **Ctrl + ws**       | Разделить окно                                             |
| **Ctrl + ww**       | Переключить окна                                           |
| **Ctrl + wq**       | Закрыть окно                                               |
| **Ctrl + wv**       | Разделить окно вертикально                                 |
| **Ctrl + wh**       | Переместить курсор в левое окно — вертикальное разделение  |
| **Ctrl + wl**       | Переместить курсор в правое окно — вертикальное разделение |
| **Ctrl + wj**       | Переместить курсор в окно ниже — горизонтальное разделение |
| **Ctrl + wk**       | Переместить курсор в окно выше — горизонтальное разделение |



## **Вкладки**

| **:tabnew либо :tabnew file**   | Открыть файл в новой вкладке                                                |
| ------------------------------- | --------------------------------------------------------------------------- |
| **Ctrl + wT**                   | Переместить текущее окно в собственную вкладку                              |
| **gt либо :tabnext либо :tabn** | Переключиться на следующую вкладку                                          |
| **gT либо :tabprev либо :tabp** | Переключиться на предыдущую вкладку                                         |
| **#gt**                         | Переключить на вкладку номер #                                              |
| **:tabmove #**                  | Переместить текущую вкладку на # позицию   — нумерация с 0                  |
| **:tabclose либо :tabc**        | Закрыть текущую вкладку и все её окна                                       |
| **:tabonly либо :tabo**         | Закрыть все вкладки кроме текущей                                           |
| **:tabdo command**              | Выполнить command на всех вкладках: :tabdo q закрывает все открытые вкладки |
| **:tabe**                       | Открытие server py в новой вкладке                                          |
| **:tabn**                       | Переход на вкладку справа                                                   |
| **:tabp**                       | Переход на предыдущую вкладку слева                                         |



## **Подсветка синтаксиса**

| **:syntax on**  | Включить подсветку                 |
| --------------- | ---------------------------------- |
| **:syntax off** | Выключить подсветку (по умолчанию) |


## **Перенос строк**

| **:set wrap**   | Разрешить word wrap (по умолчанию) |
| --------------- | ---------------------------------- |
| **:set nowrap** | Запретить word wrap                |


## **Печать**

| **:ha\[rdcopy]**                 | Распечатать документ          |
| -------------------------------- | ----------------------------- |
| **:set printoptions=duplex:off** | Отключить двустороннюю печать |


## **Сворачивание**

| **zc**                         | Свернуть блок                            |
| ------------------------------ | ---------------------------------------- |
| **zo**                         | Развернуть блок                          |
| **zM**                         | Закрыть все блоки                        |
| **zR**                         | Открыть все блоки                        |
| **za**                         | Инвертировать                            |
| **:set foldenable**            | Включить свoрачивание                    |
| **:set foldmethod=syntax**     | Сворачивание на основе синтаксиса        |
| **:set foldmethod=indent**     | Сворачивание на основе отступов          |
| **:set foldmethod=manual**     | Выделить участок с помощью v и задать zf |
| **:set foldmethod=marker**     | Сворачивание на основе маркеров в тексте |
| **:set foldmarker=bigin, end** | Задать маркеры начала и конца блока      |




## **Маркеры**

| **ma**                   | Установить локальный маркер a                                          |
| ------------------------ | ---------------------------------------------------------------------- |
| **mB**                   | Установить глобальный маркер B                                         |
| **\`c**                  | Перейти к локальному маркеру c                                         |
| **\`0**                  | Вернуться на позицию, на которой закончили работу   при закрытии       |
| **vim:marks**            | Просмотр маркеров                                                      |
| **set viminfo='1000,f1** | Маркеры пишутся в ~/ viminfo, восстанавливаясь   при следующем запуске |
| **vim. маркер "**        | Хранит последнюю позицию курсора в файле                               |


## **Сессии**

| **mksession file session** | Сохранить текущую сессию              |
| -------------------------- | ------------------------------------- |
| **source file session**    | Восстановить ранее сохранённую сессию |


## **Отступы**

| **\[#]>**              | Сдвинуть выделенное вправо                              |
| ---------------------- | ------------------------------------------------------- |
| **\[#]&lt;**           | Сдвинуть выделенное влево                               |
| **\[#]>>**             | Сдвинуть строку вправо                                  |
| **\[#]&lt;&lt;**       | Сдвинуть строку влево                                   |
| **set tabstop=#**      | Для табуляции используется # пробелов                   |
| **set shiftwidth=#**   | В командах отступа используется # пробелов              |
| **set \[no]expandtab** | Заменять ли табуляцию на соответствующее число пробелов |




## **Нумерация строк**

| **:set number**   | Включить нумерацию строк  |
| ----------------- | ------------------------- |
| **:set nonumber** | Отключить нумерацию строк |


## **Работа с вкладками (табами)**

| **:tabnew \[fname]** | Создать таб                                                       |
| -------------------- | ----------------------------------------------------------------- |
| **:tabs**            | Вывести список табов                                              |
| **:tabn**            | Следующий таб                                                     |
| **:tabp**            | Предыдущий таб                                                    |
| **&lt;n>gt**         | Перейти на таб #n                                                 |
| **gt**               | Следующий таб                                                     |
| **gT**               | Предыдущий таб                                                    |
| **:tabm +1**         | Переместить таб вперёд на одну позицию                            |
| **:tabm -1**         | Переместить таб назад на одну позицию                             |
| **:tabm 2**          | Переместить таб на заданную позицию (нумерация начинается с нуля) |




## **Работа с окнами**

| **:split**            | Разбить по горизонтали        |
| --------------------- | ----------------------------- |
| **:vsplit**           | Разбит по вертикали           |
| **Ctr+W, затем С**    | Закрыть окно                  |
| **+-**                | Изменить высоту текущего окна |
| **&lt;>**             | Изменить ширину текущего окна |
| **=**                 | Установить равный размер окон |
| **hjkl**или стрелочки | Переместить между окнами      |


## **Проверка орфографии**

| mkdir -p ~/ vim/spellcd ~/ vim/spellwget http&#x3A;//ftp vim org/vim/runtime/spell/ru koi8-r sugwget http&#x3A;//ftp vim org/vim/runtime/spell/ru koi8-r splwget http&#x3A;//ftp vim org/vim/runtime/spell/en ascii sugwget http&#x3A;//ftp vim org/vim/runtime/spell/en ascii spl |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

| **:set spell spelllang=ru,en** |  Включить проверку орфографии             |
| ------------------------------ | ----------------------------------------- |
| **:set nospell**               |  Выключить проверку орфографии            |
| **]s**                         |  Следующее слово с ошибкой                |
| **\[s**                        |  Предыдущее слово с ошибкой               |
| **z=**                         |  Заменить слово на альтернативу из списка |
| **zg**                         |  Good word                                |
| **zw**                         |  Wrong word                               |
| **zG**                         |  Ignore word                              |




## **Работа с кодировкой**

| **e ++enc=&lt;имя кодировки>**     | Редактировать файл в ??? кодировке                                        |
| ---------------------------------- | ------------------------------------------------------------------------- |
| **w ++enc=&lt;имя кодировки>**     | Сохранить файл в новой кодировке                                          |
| **set fileencodings=utf-8,koi8-r** | Список автоматически определяемых кодировок в порядке убывания приоритета |






## **Другое**

| **:set \[no]wildmenu** | При автодополнении в командной строке над ней выводятся возможные варианты |
| ---------------------- | -------------------------------------------------------------------------- |
| **:set list**          | Отображать табуляцию и переводы строк                                      |
| **q:**                 | История команд                                                             |
| ****                   | Повторение последней команды                                               |


## **Области действия**

| **:n—m**       | Область действия — строки n—m                    |
| -------------- | ------------------------------------------------ |
| **:**          | Область действия — текущая строка                |
| **:$**         | Область действия — последняя строка              |
| **:’c**        | Область действия — маркер c                      |
| **:%**         | Область действия — все строки файла              |
| **:g/шаблон/** | Область действия — все строки, содержащие шаблон |


## **Настройка Vim: файл, vimrc**

Многие команды, с помощью которых изменяют вид и поведение Vim, можно сделать включёнными по умолчанию, поместив их в**_ .vimrc_** — файл конфигурации Vim, который расположен в домашнем каталоге

Пример: если добавить эти строки в** ~/ vimrc**, подсветка синтаксиса  
и автоматическая корректировка отступов станут включёнными по умолчанию:

**syntax on**

**set autoindent**

Идеи для кастомизации Vim можно почерпнуть в[GitHub-репозитории](https://github.com/amix/vimrc).
